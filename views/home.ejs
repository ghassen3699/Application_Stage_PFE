<%- include("partials/header"); -%>
    <style>
        .sidebar {
            position: fixed;
            top: 60px;
            right: 0;
            width: 408px;
            height: 100%;
        }
        
        .visibleText {
            font-size: 0px;
        }
    </style>
    <section id="main-content">
        <section class="wrapper">
            <div class="row">
                <div class="col-lg-9 main-chart">



                    <div class="border-head">
                        <h3>Bienvenue Username</h3>
                    </div>
                    <div>
                        <canvas class="custom-bar-chart" id="myChart" height="300vw" width="800vw"></canvas>
                    </div>


                    <br>
                    <div class="row mt">
                        <div class="col-md-4 col-sm-4 mb">
                            <div class="grey-panel pn donut-chart">
                                <div class="grey-header">
                                    <h5> Bulletins Envoyer Pour Aujourd'hui</h5>
                                </div>
                                <canvas id="serverstatus01" height="120" width="120"></canvas>

                                <div class="row">
                                    <div class="col-sm-6 col-xs-6 goleft">
                                        <p><br><a href="/meteo/historiqueMeteoEnvoyer">Verifier</a></p>
                                    </div>
                                    <div class="col-sm-6 col-xs-6">
                                        <h2>
                                            <%=pourcentageDesPREV%>
                                        </h2>
                                    </div>
                                </div>
                            </div>
                        </div>



                        <div class="col-md-4 col-sm-4 mb">
                            <div class="darkblue-panel pn">
                                <div class="darkblue-header">
                                    <h5>Bulletins reçue Pour Aujourd'hui</h5>
                                </div>
                                <p id="dateAujourdhui"></p>

                                <canvas id="serverstatus02" height="120" width="120"></canvas>

                                <footer>

                                    <div class="pull-right">
                                        <h5>
                                            <%=pourcentageDesPOS%>
                                        </h5>
                                    </div>

                                </footer>
                            </div>
                        </div>


                        <div class="col-md-4 col-sm-4 mb">
                            <div class="weather pn">
                                <i class="fa fa-cloud fa-4x"></i>
                                <h2>
                                    <%= temp%>º C</h2>
                                <h4><a href="#" style="text-decoration:none; color: white;">Tunis</a></h4>
                            </div>
                        </div>
                    </div>

                </div>



                <div class="col-lg-3 ds notificationbar">
                    <a href="#" style="color: #797979;" id="buttonNotification">
                        <div class="panel green-panel no-margin">
                            <div class="panel-body">
                                <div class="container-fluid">
                                    <span style="font-size:medium">Les Notifications</span>
                                    <br>
                                    <i id="icon" class="fa fa-angle-double-up"></i>
                                </div>
                            </div>

                        </div>
                    </a>
                    <br>
                    <div class="notificationBarVisibility visibleText">
                        <div class='panel terques-chart'>
                            <div class='chart'>
                                <div class='centered'>
                                    <span>Nombre Total Des Notifications: 50</span>
                                    <strong> 

                                        </div>
                                        <div class='sparkline' data-type='line' data-resize='true' data-height='75' data-width='90%' data-line-width='1' data-line-color='#fff' data-spot-color='#fff' data-fill-color='' data-highlight-line-color='#fff' data-spot-radius='4' data-data='[200,135,667,333,526,996,564,123,890,564,455]'>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </section>
    </section>




    

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>






    <script>
        //------------------------------------ Le boutton des notifications--------------------------------------------------//
        var buttonNotification = document.querySelector('#buttonNotification');
        buttonNotification.addEventListener('click', () => {
            var icon = document.getElementById('icon');
            if (icon.classList.value === 'fa fa-angle-double-up') {
                icon.classList.value = 'fa fa-angle-double-down'
            } else {
                icon.classList.value = 'fa fa-angle-double-up'
            }
            var bar = document.querySelector('.notificationbar');
            var barVisibility = document.querySelector('.notificationBarVisibility');
            bar.classList.toggle('sidebar');
            barVisibility.classList.toggle('visibleText')
        });
        //--------------------------------------------------------------------------------------------------------------------//



        // ---------------------------------- Afficher la date ---------------------------------//
        const monthNames = ["Janvier", "Fevrier", "Mars", "Avril", "Mai", "Juin", "Juillet", "Aout", "Septembre", "Octobre", "Novembre", "Decembre"];

        const d = new Date();
        document.getElementById('dateAujourdhui').innerHTML = d.getDay() + ' ' + monthNames[d.getMonth()] + ' ' + d.getFullYear();
        //---------------------------------------------------------------------------------------//



        //----------------------------------- l'affichage de la courbe --------------------------//
        const ctx = document.getElementById('myChart').getContext('2d');
        const myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'],
                datasets: [{
                    label: 'Nombre des positions reçue pour cette semaine',
                    data: [12, 19, 3, 5, 2, 3, 25],
                    backgroundColor: [
                        'rgba(255, 100, 150, 0.5)',
                        'rgba(255, 100, 150, 0.5)',
                        'rgba(255, 100, 150, 0.5)',
                        'rgba(255, 100, 150, 0.5)',
                        'rgba(255, 100, 150, 0.5)',
                        'rgba(255, 100, 150, 0.5)',
                        'rgba(255, 100, 150, 0.5)',
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',
                        'rgba(255, 99, 132, 1)',

                    ],
                    borderWidth: 0.5
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>






    <%- include("partials/footer"); -%>